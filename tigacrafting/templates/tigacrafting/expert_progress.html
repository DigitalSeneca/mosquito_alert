{% load staticfiles %}
{% load i18n %}
{% load floppyforms %}


<!DOCTYPE html>
<html lang={% block language %}"en"{% endblock %}>
<head>

    {% block encoding %}
        <meta charset="utf-8">{% endblock %}
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta name="description" content="MosquitoAlert">
    <meta name="author" content="Movement Ecology Laboratory">

    <title>{% block page_title %}Expert progress{% endblock %}</title>

    {% block bootstrap_css %}
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/bootstrap-3.2.0-dist/css/bootstrap.min.css" %}>
        <link rel="stylesheet" href={% static "tigacrafting/bootstrap-select/css/bootstrap-select.min.css" %}>
    {% endblock %}

    <!--script src={% static "tigacrafting/jquery/1.11.1/jquery.min.js" %}></script-->
    <script src={% static "tigacrafting/jquery/1.8.3/jquery-1.8.3.min.js" %}></script>
    <!--script src={% static "tigacrafting/jquery-ui/jquery-ui.min.js" %}></script-->
    <script src={% static "tigacrafting/jquery-ui-1.8.24/jquery-ui.min.js" %}></script>
    <script src={% static "tigacrafting/tag-it/tag-it.min.js" %}></script>
    <!--link rel="stylesheet" href={% static "tigacrafting/jquery-ui/jquery-ui.css" %}-->
    <link rel="stylesheet" href={% static "tigacrafting/jquery-ui-1.8.24/jquery-ui.css" %}>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>

    <style>
        .container_value, .container_mix, .container_other, .container_category{
            font-size: 14px;
        }
        .vertical-align {
            display: flex;
            align-items: center;
        }

    </style>

    {% block fa_css %}
        <!-- FA CSS -->
        <link rel="stylesheet" href={% static "tigacrafting/font-awesome-4.2.0/css/font-awesome.min.css" %}>
    {% endblock %}


    {% block fallback_bs_js %}

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% endblock %}

    <link rel="stylesheet" href={% static "tigacrafting/tigacrafting_style.css" %}>

</head>

<body>

{% block navbar %}
    <!-- NAVBAR
================================================== -->
    <div class="navbar-wrapper">
        <div class="container">
            <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <div id="navbar" class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                                data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <div class="navbar-brand">
                            <span style="color:#ff9900; font-size: small">MosquitoAlert Expert progress</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block main_body %}


    <div class="container">
        <div class="starter-template">
            <div class="row vertical-align">
                <div class="col-xs-8"><canvas id="activity_all"></canvas></div>
                <div class="col-xs-4">
                    <h3>Completed reports rank:</h3><h3><b><span style="color:#FF6384">{{ ranking_data.pos }}</span></b> / {{ ranking_data.len }}</h3><h3> {{ ranking_data.me_count }} Completed reports </h3>
                    <h4>What's this? <span data-toggle="tooltip" title="Shows the number of completed reports, as well as your rank regarding number of completed reports relative to other experts."><i class="fa fa-question-circle" aria-hidden="true"></i></span></h4>
                </div>
            </div>
            <hr>
            <div class="row vertical-align">
                <div class="col-xs-8"><canvas id="accuracy_hard"></canvas></div>
                <div class="col-xs-4">
                    <h3>Hard accuracy rank:</h3><h3><b><span style="color:#FF6384">{{ rank_data_hard.pos }}</span></b> / {{ rank_data_hard.len }}</h3><h3> {{ rank_data_hard.val }} % Hard accuracy</h3>
                    <h4>What's this? <span data-toggle="tooltip"
                                       title="This shows the accuracy, defined as percent of completed reports where
                                       the expert report classification is the same as the overall report classification.
                                       Hard means a strict coincidence, i.e. the expert classification is the same
                                       species and level of certainty as the overall classification. Example: If you classified
                                       the report as Definitely Aedes Albopictus, and the overall classification is Probably
                                       Aedes Albopictus, this is counted as a failed classification. If the overall
                                       classification were Definitely Aedes Albopictus, this would be counted as a
                                       correct classification.">
                        <i class="fa fa-question-circle" aria-hidden="true"></i></span></h4>
                </div>
            </div>
            <hr>
            <div class="row vertical-align">
                <div class="col-xs-8"><canvas id="accuracy_soft"></canvas></div>
                <div class="col-xs-4">
                    <h3>Soft accuracy rank:</h3><h3><b><span style="color:#FF6384">{{ rank_data_soft.pos }}</span></b> / {{ rank_data_soft.len }}</h3><h3> {{ rank_data_soft.val }} % Soft accuracy</h3>
                    <h4>What's this? <span data-toggle="tooltip"
                                       title="This shows the accuracy, defined as percent of completed reports where
                                       the expert report classification is the same as the overall report classification.
                                       Soft means a lax coincidence, i.e. the expert classification is the same
                                       species as the overall classification, and accuracy is ignored. Example: If you
                                       classified the report as Definitely Aedes Albopictus, and the overall classification is Probably
                                       Aedes Albopictus, this is counted as a correct classification.">
                        <i class="fa fa-question-circle" aria-hidden="true"></i></span></h4>
                </div>
            </div>
            <hr>
            <div class="row vertical-align">
                <div id="container_two" class="col-xs-12"></div>
            </div>
        </div>
    </div>

        <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{% static 'tigacrafting/bootstrap-3.2.0-dist/js/bootstrap.min.js' %}"></body>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="{% static 'tigacrafting/bootstrap-3.2.0-assets/js/ie10-viewport-bug-workaround.js' %}"></script>
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
    <script>
        var hard_progress_data = [];
        hard_progress_data = {{ hard_progression_data|safe }};
        var activity_data_series = [];
        var activity_data_values = [];
        var color_series = [];
        {% for bit in n_reports %}
        activity_data_series.push({{ bit.id }});
        activity_data_values.push({{ bit.count }});
        {% if bit.me == True %}
        color_series.push('rgba(255, 99, 132, 1)');
        {% else %}
        color_series.push('rgba(128, 128, 128, 0.2)');
        {% endif %}
        {% endfor %}

        var accuracy_hard_series = [];
        var accuracy_soft_series = [];
        var accuracy_hard_values = [];
        var accuracy_soft_values = [];
        var color_series_accuracy_hard = [];
        var color_series_accuracy_soft = [];
        {% for bit in accuracy_hard %}
        accuracy_hard_series.push({{ bit.id }});
        accuracy_hard_values.push({{ bit.accuracy_hard }});
        {% if bit.me == True %}
        color_series_accuracy_hard.push('rgba(255, 99, 132, 1)');
        {% else %}
        color_series_accuracy_hard.push('rgba(128, 128, 128, 0.2)');
        {% endif %}
        {% endfor %}
        {% for bit in accuracy_soft %}
        accuracy_soft_series.push({{ bit.id }});
        accuracy_soft_values.push({{ bit.accuracy_soft }});
        {% if bit.me == True %}
        color_series_accuracy_soft.push('rgba(255, 99, 132, 1)');
        {% else %}
        color_series_accuracy_soft.push('rgba(128, 128, 128, 0.2)');
        {% endif %}
        {% endfor %}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{% static 'tigacrafting/expert_progress.js' %}"></script>


{% endblock %}

</body>
</html>
